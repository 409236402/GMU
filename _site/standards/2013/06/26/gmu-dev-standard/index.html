
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GMU代码规范</title>
    
    <meta name="author" content="Baidu GMU Team">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/css/1.4.0/bootstrap.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="topbar">
      <div class="fill">
        <div class="container">
          <a class="brand" href="/">GMU Blog</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/nav/framework.html">Webapp 框架</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/nav/solutions.html">解决方案</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/nav/experiences.html">开发经验</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/nav/standards.html">GMU规范</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header">
  <h1>GMU代码规范 <small>mobile webapp javascript</small></h1>
</div>

<div class="row">
  <div class="span10">
    <h2>内容导航</h2>

<ul>
<li><a href="https://github.com/gmuteam/GMU/wiki/GMU-%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83#1-">基本的格式化</a>

<ul>
<li><a href="https://github.com/gmuteam/GMU/wiki/GMU-%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83#1-5-">合适的换行</a></li>
<li><a href="https://github.com/gmuteam/GMU/wiki/GMU-%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83#1-6-">合适的空格</a></li>
</ul></li>
<li><a href="https://github.com/gmuteam/GMU/wiki/GMU-%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83#2-javascript">Javascript命名规范</a></li>
<li><a href="https://github.com/gmuteam/GMU/wiki/GMU-%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83#3-">注释</a></li>
<li><a href="https://github.com/gmuteam/GMU/wiki/GMU-%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83#4-">其他规范</a></li>
</ul>

<h2>1. 基本的格式化</h2>

<p>1-1. 代码缩进采用4个空白符。</p>

<p>1-2. 语句必须都有分号结尾，除了 for, function申明, if, switch, try, while。
<strong>非申明式函数也需要分号</strong>
```javascript
var a;</p>

<p>//错误, 结尾缺少分号
a = function() {
    //do some thing.
}
```</p>

<p>1-3. 所有的循环体和判断体都需要用&quot;{}&quot;括起来。如：
```javascript
//正确
if( condition ) {
    doSomething();
}</p>

<p>//错误
if( condition ) doSomething();
```</p>

<p>1-4. 变量声明。同一作用域下的所有变量，全部提至函数顶部，且使用一个var来集中申明。</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="c1">//正确</span>
<span class="kd">function</span> <span class="nx">a</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">v1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">v2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">v3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

    <span class="nx">statement</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">//do some thing.</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//错误</span>
<span class="kd">function</span> <span class="nx">a</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">v1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

    <span class="nx">statement</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//错误</span>
<span class="kd">function</span> <span class="nx">a</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">//do some thing.</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">condition</span> <span class="p">)</span> <span class="p">{</span>
       <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

       <span class="c1">//do something.</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//错误</span>
<span class="kd">function</span> <span class="nx">a</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">condition</span> <span class="p">)</span> <span class="p">{</span>
       <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

       <span class="c1">//do something.</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>同时每个变量独占一行，第二个起应当有两个缩进。需要赋值初始值的优先放在前面，如：</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">a</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">first</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">second</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">third</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nx">fourth</span><span class="p">,</span>
        <span class="nx">fifth</span><span class="p">;</span>

    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3>1-5. 合适的换行。</h3>

<p>单行语句不允许超出80个字符，超出的需要进行合适的断行处理。</p>

<p>1-5-1. 函数链式调用，从第二个点的前面开始换行，且换行后前面应当有一个缩进。</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="c1">//函数链式调用</span>
<span class="kd">var</span> <span class="nx">$item</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span> <span class="s1">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span> <span class="p">).</span><span class="nx">attr</span><span class="p">(</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;what ever&#39;</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span> <span class="s1">&#39;className&#39;</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="s1">&#39;xxxx&#39;</span> <span class="p">);</span>

<span class="c1">//非赋值语句</span>
<span class="nx">$</span><span class="p">(</span> <span class="s1">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span> <span class="p">).</span><span class="nx">attr</span><span class="p">(</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;what ever&#39;</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span> <span class="s1">&#39;className&#39;</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="s1">&#39;xxxx&#39;</span> <span class="p">);</span>

<span class="c1">//先取对象再取方法</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">obj1</span>
    <span class="p">.</span><span class="nx">obj3</span>
    <span class="p">.</span><span class="nx">funA</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">funB</span><span class="p">();</span>
</code></pre></div>
<p>1-5-2. 方法参数过长，if语句中条件过多时也需要换行，这种情况下的缩进为2个。同是操作符应当保留在右边结尾处。</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">callFunc</span><span class="p">(</span> <span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="nx">longArgmunent3</span><span class="p">,</span> <span class="nx">longArgmuent4</span><span class="p">,</span>
        <span class="nx">longArgmument5</span> <span class="p">);</span>

<span class="kd">function</span> <span class="nx">doSomething</span><span class="p">(</span> <span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="nx">longArgmunent3</span><span class="p">,</span> <span class="nx">longArgmuent4</span><span class="p">,</span>
        <span class="nx">longArgmument5</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nx">condition1</span> <span class="o">&amp;&amp;</span> <span class="nx">condition2</span> <span class="o">||</span> <span class="nx">condition3</span> <span class="o">&amp;&amp;</span>
       <span class="nx">condition5</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>1-5-3. 每一个块状代码的开始都应当有一个空行。
```javascript
function myFunc() {
    var v1 = 1,
        v2 = 2,
        v3 = 3;</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">if( v1 == 1 ) {
    statement
}

while( condition ) {
    statement
}

if( condition ) {
    statement
}
</code></pre></div>
<p>}</p>

<p>//错误
function myFunc() {
    var v1 = 1,
        v2 = 2,
        v3 = 3;
    if( v1 == 1 ) {
        statement
    }
    while( condition ) {
        statement
    }</p>

<p>}
```</p>

<p>1-5-4. if之后的else的代码块应当在前个代码块之后，不允许另起新行。
```javascript
if ( a === 1 ) {
    statement
} else if ( a === 2 ) {
    statement
}</p>

<p>//错误
if ( a === 1 ) {
    statement
}
else if ( a === 2 ) {
    statement
}
```</p>

<p>1-5-5. 包含代码块的&quot;{}&quot;，应该在&quot;{&quot;后立即换行。
```javascript
//正确
for ( t in selected ) {
    statement1
    statement2
}</p>

<p>for ( t in selected ) {
    statement1
}</p>

<p>//错误
for (t in selected)
{
    //statement1
    //statement2
}
for (t in selected) { statement }
```</p>

<p>1-5-6. switch语句中的断行, 每个case之前有一个缩进，case之后的语句两个缩进, 每个break;后都有一个新行，最后一个除外。</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="k">switch</span><span class="p">(</span> <span class="nx">condition</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s1">&#39;first&#39;</span><span class="o">:</span>
        <span class="nx">doSomething</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="s1">&#39;second&#39;</span><span class="o">:</span>
        <span class="nx">doSomething</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="s1">&#39;third&#39;</span><span class="o">:</span>
    <span class="k">case</span> <span class="s1">&#39;fourth&#39;</span><span class="o">:</span>
         <span class="nx">doSomething</span><span class="p">();</span>
         <span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
        <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>1-5-7. 超长字符串应该使用&quot;+&quot;进行换行。
```javascript
//正确
var myString = &#39;A rather long string of English text, an error message &#39; +
             &#39;actually that just keeps going and going -- an error &#39; +
             &#39;message to make the Energizer bunny blush (right through &#39; +
             &#39;those Schwarzenegger shades)! Where was I? Oh yes, &#39; +
             &#39;you\&#39;ve got an error and all the extraneous whitespace is &#39; +
             &#39;just gravy.  Have a nice day.&#39;;</p>

<p>//错误
var myString = &#39;A rather long string of English text, an error message \
              actually that just keeps going and going -- an error \
              message to make the Energizer bunny blush (right through \
              those Schwarzenegger shades)! Where was I? Oh yes, \
              you\&#39;ve got an error and all the extraneous whitespace is \
              just gravy.  Have a nice day.&#39;;
```</p>

<h3>1-6. 适当的空格。</h3>

<p>1-6-1. 包含&quot;()&quot;括号的语句，括号前后应当各有一个空格，括号内部开头和结尾处应当各有一空格，诸如： if / for / while / switch ( statements ) { … } 等；
```javascript
if ( a === 1 ) {
    statement
}</p>

<p>for ( var i = 0; i &lt; 1000; i++ ) {
    statement
}</p>

<p>while ( v ) {
    statement
}</p>

<p>switch ( v ) {
    case &#39;&#39;:...
}
```</p>

<p>1-6-2. 方法定义和方法调用左括号“(”前面不需要空格, 右括号与{之间始终有一个空格，括号内部开头和结尾应当各有一空格。
```javascript
//函数定义
function myFunc( arg ) {
    statement
}</p>

<p>//匿名函数
function( arg ) {
    statement
}</p>

<p>//函数调用
myFunc( arg );</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">**方法调用时，有几种例外，函数调用时有些场景不需要要空格**

```javascript
//1. 函数调用中无参数
callFunc();

//2. 参数是obj，array，function直接量时
callFunc([ a, b, c ]);

callFunc({
    a: 1,
    b: 2
});

callFunc(function() {
    doSomething();
});
</code></pre></div>
<p>1-6-3. &quot;=&quot;、&quot;==&quot;、&quot;&amp;&amp;&quot;、&quot;||&quot;、&quot;&gt;&quot;、&quot;&lt;&quot;前后需要跟空格</p>

<p>1-6-4. 数组成员间的&quot;,&quot;和各个参数间的&quot;,&quot;（包括形参和实参）后面需要跟空格。</p>

<p>1-6-5. &quot;[]&quot;中的&quot;[&quot;后以及&quot;]&quot;前需要跟空格
```javascript
for ( t in selected ) {</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">if ( !hash[ t ] &amp;&amp; isOk ) {
     deselect( t );
}
</code></pre></div>
<p>}</p>

<p>function MyClass( selector ){
    //.....
}</p>

<p>new MyClass( &#39;#abc&#39; );</p>

<p>var arr = [ 1, 2, 3, 4 ];</p>

<p>//错误
for (t in selected) {
    if (!hash[t]&amp;&amp;isOk){
        deselect(t)
    }
}</p>

<p>function MyClass(selector){
    //.....
}</p>

<p>new MyClass(&#39;#abc&#39;);</p>

<p>var arr = [1,2,3,4];
```</p>

<h2>2. Javascript命名规范</h2>

<p>2-1.  构造器采用驼峰式命名，并且首字母大写。如：
<code>javascript
function DialogManager ( config ) {
    statement;
}
</code></p>

<p>2-2. 枚举类型变量采用驼峰式命名，并且首字母大写。属性名单词全部大写，单词间以下划线分隔。如：
<code>javascript
var QueueError = {
    QUEUE_LIMIT_EXCEEDED: -100,
    FILE_EXCEEDS_SIZE_LIMIT: -110,
    ZERO_BYTE_FILE: -120,
    INVALID_FILETYPE: -130
};
</code></p>

<p>2-3. 对象的属性或方法名采用小驼峰式(lower camel-case)，如&quot;init&quot;, &quot;bindEvent&quot;, &quot;updatePosition&quot;：
<code>javascript
Dialog.prototype = {
    init: function () {},
    bindEvent: function () {},
    updatePosition: function () {}
};
</code></p>

<p>2-4. 私有变量名用下划线开头。如：&quot;<em>current&quot;, &quot;</em>defaultConfig&quot;
<code>javascript
function Dialog( config ) {
    this._defaultConfig = {};
}
</code></p>

<p>2-5. 常量名全部大写，单词间用下划线分隔。如：“CSS<em>BTN</em>CLOSE”, &quot;TXT<em>LOADING&quot;
```javascript
function Dialog( config ) {
    this.DEFAULT</em>CONFIG = {
        CSS<em>BTN</em>CLOSE: &#39;x-btn-cls&#39;,
        TXT_LOADING: &#39;加载中...&#39;
    };
}
```</p>

<p>2-6. 方法的返回值如果是布尔值，则必须以is、can、has、should等为前缀
<code>javascript
function isGroupId( id ) {
    return (id + &#39;&#39;).indexOf( &#39;G&#39; ) &gt; 0;
}
</code></p>

<p>2-7. 简写单词在变量名中出现时也应该遵循驼峰式写法。
```javascript
//正确
function getXml () {}
function getId () {}
function getHtml () {}
var xmlDocument;</p>

<p>//错误
function getXML(){}
function getID(){}
function getHTML(){}
var XMLDocument;
```</p>

<p>2-8. 在闭包中访问所在实例this指针时，统一使用变量me指向。
```javascript
var me = this;
setTimeout( function() {
    //me.
}, 1000 );</p>

<p>//错误
var ins = this;
setTimeout( function() {
    //ins.
}, 1000 );
```</p>

<p>2-9. 符合下列场景的变量，请使用对应的命名。</p>

<table>
    <tr>
        <th>变量名</th>
        <th>变量含义</th>
        <th>示例</th>
    </tr>
    <tr>
        <td>e</td>
        <td>Event对象</td>
        <td><pre><code>$( '#a' ).click( function( e ){
    //...
});
</code></pre></td>
    </tr>
    <tr>
        <td>el</td>
        <td>HTMLElement</td>
        <td><pre><code>var el =$( 'div.demo' )[ 0 ];</code></pre></td>
    </tr>
    <tr>
        <td>ex</td>
        <td>Exception</td>
        <td><pre><code>try{
    //statement
}
catch( ex ){
    console.log( ex );
}
</code></pre></td>
    </tr>
    <tr>
        <td>opts</td>
        <td>JSON结构的配置项</td>
        <td><pre><code>function MyClass( opts ){
    this._defaultOpts = {...};
    K.mix( this._defaultOpts, opts );
}
</code></pre></td>
    </tr>
</table>

<p>2-10. 所有Zepto/jQuery对象，变量名以$符号开头，如：
<code>javascript
var $div = $(&#39;&lt;div&gt;&lt;/div&gt;&#39;);
</code></p>

<p>2-11. 变量命名前缀应当是名词，与函数区分开来，函数应当是动词
```javascript
//好的写法
var count = 10,
    myName = &#39;Abcd&#39;,
    found = true;</p>

<p>//不好的写法
var getCount = 10,
    isFound = true;</p>

<p>//好的写法
function getName() {
    return myName;
}</p>

<p>//不好的写法
function theName(){
    return myName;
}
```</p>

<h2>3. 注释</h2>

<p>3-1. Js文档注释，每个js文件顶部都必须包含关于Js文件功能的注释信息。
<code>javascript
/**
 * @fileoverview 文件功能描述或一些其他相关信息.
 */
</code></p>

<p>3-2. 单行注释。</p>

<p>以两个斜线开始，以行尾结束，两个斜线与内容之间应当有一个空格。
<code>javascript
    // 这是一个注释
</code></p>

<p>单行注释分以下两种：</p>

<ol>
<li>独占一行，用来解释下一行代码。这行注释之前应当有一个空行，且缩进层级和下一行代码保持一致。</li>
<li>在代码行的尾部添加，代码结束到注释之间至少有一个缩进。注释（包括前面的代码部分）不能超过单行最大字符数限制，如果超过改成第一种注释。</li>
</ol>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">doSomething</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>  <span class="c1">//这变量用来存长度</span>

        <span class="c1">//这个变量用来存宽度</span>
        <span class="nx">b</span><span class="p">,</span>

        <span class="c1">//这个变量用来存高度</span>
        <span class="nx">c</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">condition</span> <span class="p">)</span> <span class="p">{</span>

        <span class="c1">//如果代码执行到这，则说明通过安全验证。</span>
        <span class="nx">popupDialog</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>3-3. 多行注释</p>

<p>当内容比较多用单行注释不能满足需求时，推荐使用多行注释，格式如下，前面应当有个空格。
```javascript</p>

<p>/*
 * 我的注释
 * 注释中的第二段
 */
if( condition ) {
    statement
}
```</p>

<p>3-4. 避免多余的注释，当代码很明了时不应当添加注释。
```javascript
// 不必要的注释</p>

<p>// 初始化count
var count = 10;
```</p>

<h3>4. 其他规范</h3>

<p>4-1.  for-in循环体中必须用hasOwnProperty方法检查成员是否为自身成员。避免来自原型链上的污染。</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="c1">//正确</span>
<span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">object</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">doSomething</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>4-2. 不要使用with, void, eval。</p>

<p>4-3. 在与类型确定的变量进行条件判断时，使用严格的条件判断符。用===代替==，用!==代替!=。
<code>javascript
if ( isValid === true ) {
    //
}
</code></p>

<p>4-14. 下面类型的对象不建议用new构造：new Number, new String, new Boolean, new Object(用{}代替), new Array(用[]代替)。</p>

<p>4-5. 引用对象成员用obj.prop代替obj[&#39;prop&#39;]，除非属性名是变量。</p>

<p>4-6. 使用parseInt将字符串转换成整数时必须使用基数参数。
```javascript
//10进制
parseInt( str, 10 );</p>

<p>//2进制
parseInt( str, 2 );</p>

<p>//8进制
parseInt( str, 8 );</p>

<p>//16进制
parseInt( str, 16 );</p>

<p>//错误
parseInt( str );
``<code>
另外</code>parseInt( str, 10)<code>可以考虑是用</code>~~str<code>或者</code>str&gt;&gt;0`来达到同样的效果</p>

<p>4-7. 函数定义。不要在if、for的代码块中定义函数，在函数中定义内嵌函数时应该把函数定义放在顶部。闭包除外。</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="c1">//正确</span>
<span class="kd">function</span> <span class="nx">outerFunc</span><span class="p">(</span> <span class="nx">va</span> <span class="p">){</span>
    <span class="nx">va</span> <span class="o">=</span> <span class="nx">va</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">innerFunc</span><span class="p">(){</span>
        <span class="c1">//to do....</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">va</span> <span class="p">){</span>
        <span class="nx">innerFunc</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//错误</span>
<span class="kd">function</span> <span class="nx">outerFunc</span><span class="p">(</span> <span class="nx">va</span> <span class="p">){</span>
    <span class="nx">va</span> <span class="o">=</span> <span class="nx">va</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">va</span> <span class="p">){</span>
        <span class="kd">function</span> <span class="nx">innerFunc</span><span class="p">(){</span>
            <span class="c1">//to do....</span>
        <span class="p">}</span>
        <span class="nx">innerFunc</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>4-8. 立即调用的函数用括号括起来.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="c1">//正确</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">})();</span>

<span class="c1">//错误</span>
<span class="k">void</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}();</span>

<span class="c1">//错误</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}());</span>

<span class="c1">//错误</span>
<span class="kd">function</span><span class="p">(){</span>
    <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}();</span>
</code></pre></div>
<p>4-9. 初始化一个可能赋值为对象的变量时，设为null。
```javascript
var a = null;</p>

<p>//later
a = new Foo();</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">4-10. 如果某方法，期待返回某一对象时，在异常的情况下应当返回null, 不要返回undefined, 0, false之类的。
```javascript
function getPerson() {

    if( condition ) {
        return new Persion();
    } else {
        return null;
    }
}
</code></pre></div>
<p>4-11. 引号，字符串外层必须使用单引号，内部如果是HTML属性所需的引号则必须为双引号。
```javascript
var myString = &#39;&lt; a href=&quot;http://www.baidu.com&quot;&gt;Let\&#39;sGo</a>&#39;;</p>

<p>//错误
var myString = &quot;&lt; a href=&#39;http://www.baidu.com&#39;&gt;Let&#39;sGo</a>&quot;&#39;;
```</p>

<p>4-12. 构造函数，使用函数申明定义。
```javascript
function MyClass( opts ){
    statement
}</p>

<p>//错误
var MyClass = function( opts ){
    statement
}
```</p>

<p>4-13. 不要分发事件对象，目标方法应该明确所需变量。
```javascript
var myApp = {
    handler: function( e ) {
        this.showPopup( e.pageX, e.pageY );
    },</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">showPopup: function( x, y ) {
    //do popup
}
</code></pre></div>
<p>}</p>

<p>addListener( elem, &quot;click&quot;, function() {
    myApp.handler( e );
});</p>

<p>//错误
var myApp = {
    handler: function( e ) {
        this.showPopup( e );
    },</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">showPopup: function( e ) {
    //do popup
}
</code></pre></div>
<p>}</p>

<p>addListener( elem, &quot;click&quot;, function() {
    myApp.handler( e );
});
```</p>

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/standards/2013/06/26/gmu-code-standard" title="GMU开发规范">&larr; Previous</a></li>
      
        <li><a href="/siteuse/archive.html">Archive</a></li>
      
        <li class="next"><a href="/experiences/2013/06/26/gmu-hacks" title="GMU bug总结">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'gmuteamcn'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>26 June 2013</span></div>

    
  </div>
</div>


      </div>

      <footer>
        <p>&copy; Baidu GMU Team 2013-2014,  
          <a href="http://gmu.baidu.com" target="_blank" title="GMU DOC WIKI">GMU官网 </a>
          & <a href="http://https://githubcom/gmuteam/GMU/" target="_blank"> GMU Github</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
  </body>
</html>

